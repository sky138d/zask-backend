"use strict";(()=>{var e={};e.id=194,e.ids=[194],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7385:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>A,originalPathname:()=>m,patchFetch:()=>y,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>g,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>O});var s={};t.r(s),t.d(s,{GET:()=>c,OPTIONS:()=>u});var a=t(5419),o=t(9108),n=t(9678),i=t(8070);let l=require("pg");async function c(e){try{let{searchParams:r}=new URL(e.url),t=(r.get("q")||"").trim(),s=parseInt(r.get("limit")||"30",10),a=parseInt(r.get("page")||"1",10),o=r.get("offset"),n=o?parseInt(o,10):Math.max(0,(a-1)*s);if(!process.env.POSTGRES_URL_NON_POOLING&&!process.env.POSTGRES_URL)return i.Z.json({error:"Database not configured"},{status:500});if(!t)return i.Z.json({results:[]});let c=process.env.POSTGRES_URL_NON_POOLING||process.env.POSTGRES_URL,u=new l.Client({connectionString:c});await u.connect();let p=`
      SELECT name, type, subtype, team, year, position, ovr
      FROM cards_minimal
      WHERE name ILIKE $1
      ORDER BY similarity(name, $2) DESC
      LIMIT $3 OFFSET $4
    `,d=`%${t}%`,h=await u.query(p,[d,t,s,n]);await u.end();let g=e.headers.get("origin")||"*";return i.Z.json({results:h.rows},{headers:{"Access-Control-Allow-Origin":g,"Access-Control-Allow-Credentials":"true"}})}catch(t){console.error("search players error",t);let r=e.headers.get("origin")||"*";return i.Z.json({error:"Server error",details:t.message},{status:500,headers:{"Access-Control-Allow-Origin":r,"Access-Control-Allow-Credentials":"true"}})}}async function u(e){let r=e.headers.get("origin")||"*";return new i.Z(null,{status:204,headers:{"Access-Control-Allow-Origin":r,"Access-Control-Allow-Methods":"GET,OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization, apikey","Access-Control-Allow-Credentials":"true"}})}let p=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/search/players/route",pathname:"/api/search/players",filename:"route",bundlePath:"app/api/search/players/route"},resolvedPagePath:"C:\\Users\\sky13\\Documents\\V25 PAGE\\v25back\\app\\api\\search\\players\\route.js",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:h,serverHooks:g,headerHooks:A,staticGenerationBailout:O}=p,m="/api/search/players/route";function y(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:h})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[52,70],()=>t(7385));module.exports=s})();